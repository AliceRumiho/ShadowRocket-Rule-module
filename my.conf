[General]
# Shadowrocket 快速使用方法：
# 1、首页 > 添加节点。
# 2、设置 > 延迟测试方法，选择 CONNECT。
# 3、首页 > 连通性测试，选择可用节点连接。

# 【配置锁定：[General] 区段中所有位于 'skip-proxy' 之前的配置项将被锁定，不会被更新！】

# 旁路系统。 (已锁定)
bypass-system = true

# 启用 DNS IP 覆写，利用系统 DNS 快速解析 DoT/DoQ 服务器的IP（已锁定）
dns-ip-override = true

# DNS 覆写 (主 DNS)。使用并行查询，争取最快响应。（已锁定）
# DoQ AdGuard (境外快), DoT Cloudflare (境外稳), DoT AliDNS (境内快)
dns-server = quic://94.140.14.14, quic://94.140.14.15, tls://1.1.1.1, tls://1.0.0.1

# 备用 DNS (Fallback)（已锁定）
fallback-dns-server = tls://223.5.5.5

# 启用 IPv6 支持。 (已锁定)
ipv6 = true

# DNS 劫持。 (已锁定)
hijack-dns = 8.8.8.8:53,8.8.4.4:53

# TUN 旁路路由。 (已锁定)
tun-excluded-routes = 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 192.0.0.0/24, 192.0.2.0/24, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

# 跳过代理。 (LOCK MARKER: 此行之前的所有 [General] 配置将被锁定)
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com,www.baidu.com

# 其他优化项
udp-policy-not-supported-behaviour = REJECT
private-ip-answer = false
dns-direct-fallback-proxy = true
ipv6-only-if-no-ipv4-dns = false
block-quic = all-proxy


[Proxy]
# === 代理节点 (Proxy Nodes) ===
# *** 请在此处手动添加您的所有节点，或通过订阅链接导入节点 ***

[Proxy Group]
# === 代理分组 (Proxy Groups) - 采用内置 PROXY 引用，无需定义 PROXY 组 ===
# 所有服务策略组引用 PROXY (当前节点) 和 DIRECT (直连)
AI = select,PROXY,DIRECT,policy-select-name=PROXY
YouTube = select,PROXY,DIRECT,policy-select-name=PROXY
Netflix = select,PROXY,DIRECT,policy-select-name=PROXY
Disney+ = select,PROXY,DIRECT,policy-select-name=PROXY
Max = select,PROXY,DIRECT,policy-select-name=PROXY
TikTok = select,PROXY,DIRECT,policy-select-name=PROXY
Spotify = select,DIRECT,PROXY,policy-select-name=PROXY
Telegram = select,PROXY,DIRECT,policy-select-name=PROXY
Twitter = select,PROXY,DIRECT,policy-select-name=PROXY
Facebook = select,PROXY,DIRECT,policy-select-name=PROXY
PayPal = select,DIRECT,PROXY,policy-select-name=PAYPAL
Amazon = select,DIRECT,PROXY,policy-select-name=PROXY
苹果服务 = select,DIRECT,PROXY,policy-select-name=DIRECT
谷歌服务 = select,PROXY,DIRECT,policy-select-name=PROXY
微软服务 = select,DIRECT,PROXY,policy-select-name=DIRECT
哔哩哔哩 = select,DIRECT,PROXY,policy-select-name=DIRECT
游戏平台 = select,DIRECT,PROXY,policy-select-name=DIRECT

[Rule]
# === 规则 (Rule) - 确保分流效率最高 ===

# *** 1. 确保加密 DNS 服务器走正确的通道 (纯IP) ***
IP-CIDR,223.5.5.5/32,DIRECT,no-resolve      # 阿里 DoT 走直连 (境内最快)
IP-CIDR,94.140.14.14/31,PROXY,no-resolve    # AdGuard (94.140.14.14/15) 走代理
IP-CIDR,1.1.1.1/32,PROXY,no-resolve         # Cloudflare 走代理
IP-CIDR,1.0.0.1/32,PROXY,no-resolve         # Cloudflare 备用走代理

# *** 2. CDN 加速域名走直连 (规则集下载加速) ***
DOMAIN-SUFFIX,jsdelivr.net,DIRECT

# *** 3. 加速的 RULE-SET 规则 (已全部转换) ***
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/QuantumultX/Apple/Apple.list,苹果服务
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/BiliBili/BiliBili.list,哔哩哔哩
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/NetEaseMusic/NetEaseMusic.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Baidu/Baidu.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/DouBan/DouBan.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/QuantumultX/WeChat/WeChat.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/DouYin/DouYin.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Sina/Sina.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Zhihu/Zhihu.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/XiaoHongShu/XiaoHongShu.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/YouTube/YouTube.list,YOUTUBE
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Netflix/Netflix.list,NETFLIX
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Disney/Disney.list,DISNEY+
DOMAIN-SUFFIX,litix.io,MAX
DOMAIN-SUFFIX,discomax.com,MAX
DOMAIN-SUFFIX,brightline.tv,MAX
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/HBO/HBO.list,MAX
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Spotify/Spotify.list,SPOTIFY
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Telegram/Telegram.list,TELEGRAM
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/PayPal/PayPal.list,PAYPAL
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Twitter/Twitter.list,TWITTER
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Facebook/Facebook.list,FACEBOOK
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Amazon/Amazon.list,AMAZON
DOMAIN-SUFFIX,x.ai,AI
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Claude/Claude.list,AI
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Gemini/Gemini.list,AI
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/OpenAI/OpenAI.list,AI
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Sony/Sony.list,游戏平台
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Nintendo/Nintendo.list,游戏平台
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Epic/Epic.list,游戏平台
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/SteamCN/SteamCN.list,游戏平台
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Steam/Steam.list,游戏平台
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Game/Game.list,游戏平台
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/GitHub/GitHub.list,PROXY
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Microsoft/Microsoft.list,微软服务
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Google/Google.list,谷歌服务
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/TikTok/TikTok.list,TIKTOK
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/QuantumultX/Global/Global.list,PROXY
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/QuantumultX/China/China.list,DIRECT

# *** 确保本地网络流量在隧道内直连 ***
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Shadowrocket/Lan/Lan.list,DIRECT

# *** 4. GEOIP CN 兜底 (确保所有 CN IP 走直连，速度最快) ***
GEOIP,CN,DIRECT

# *** 5. 最终兜底策略 (所有未匹配的流量走代理) ***
FINAL,PROXY

[Host]
*.apple.com = server:system
*.icloud.com = server:system
localhost = 127.0.0.1

[URL Rewrite]
# === URL 重写 (URL Rewrite) ===
# Google搜索引擎防跳转的重写。
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

[MITM]
hostname = *.google.cn








